<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.189">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>ml_project_template - Helsinki Machine Learning Project Template</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="ml_project_template - Helsinki Machine Learning Project Template">
<meta property="og:description" content="">
<meta property="og:site-name" content="ml_project_template">
<meta name="twitter:title" content="ml_project_template - Helsinki Machine Learning Project Template">
<meta name="twitter:description" content="">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">ml_project_template</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/City-of-Helsinki/ml_project_template/tree/master/"><i class="bi bi-github" role="img">
</i> 
 </a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Helsinki Machine Learning Project Template</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link active">Helsinki Machine Learning Project Template</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data.html" class="sidebar-item-text sidebar-link">Data</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./model.html" class="sidebar-item-text sidebar-link">Model</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./loss.html" class="sidebar-item-text sidebar-link">Loss</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./workflow.html" class="sidebar-item-text sidebar-link">Workflow</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./api.html" class="sidebar-item-text sidebar-link">API</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#about" id="toc-about" class="nav-link active" data-scroll-target="#about">About</a></li>
  <li><a href="#contents" id="toc-contents" class="nav-link" data-scroll-target="#contents">Contents</a></li>
  <li><a href="#how-to-install" id="toc-how-to-install" class="nav-link" data-scroll-target="#how-to-install">How to install</a>
  <ul>
  <li><a href="#on-your-github-homepage" id="toc-on-your-github-homepage" class="nav-link" data-scroll-target="#on-your-github-homepage">1. On your GitHub homepage</a></li>
  <li><a href="#setting-up-your-development-environment" id="toc-setting-up-your-development-environment" class="nav-link" data-scroll-target="#setting-up-your-development-environment">2. Setting up your development environment</a>
  <ul class="collapse">
  <li><a href="#a-recommended-codespaces" id="toc-a-recommended-codespaces" class="nav-link" data-scroll-target="#a-recommended-codespaces">a) Recommended: Codespaces</a></li>
  <li><a href="#b-cant-use-codespaces-local-installation-with-docker" id="toc-b-cant-use-codespaces-local-installation-with-docker" class="nav-link" data-scroll-target="#b-cant-use-codespaces-local-installation-with-docker">b) Can’t use Codespaces: Local installation with Docker</a></li>
  <li><a href="#c-cant-use-docker-local-manual-installation" id="toc-c-cant-use-docker-local-manual-installation" class="nav-link" data-scroll-target="#c-cant-use-docker-local-manual-installation">c) Can’t use Docker: Local manual installation</a></li>
  <li><a href="#d-cant-connect-to-internet-offline-install-with-docker" id="toc-d-cant-connect-to-internet-offline-install-with-docker" class="nav-link" data-scroll-target="#d-cant-connect-to-internet-offline-install-with-docker">d) Can’t connect to internet: Offline install with Docker</a></li>
  </ul></li>
  <li><a href="#initializing-your-project" id="toc-initializing-your-project" class="nav-link" data-scroll-target="#initializing-your-project">3. Initializing your project</a></li>
  </ul></li>
  <li><a href="#how-to-use" id="toc-how-to-use" class="nav-link" data-scroll-target="#how-to-use">How to use</a></li>
  <li><a href="#installing-updating-project-libraries" id="toc-installing-updating-project-libraries" class="nav-link" data-scroll-target="#installing-updating-project-libraries">Installing &amp; updating project libraries</a></li>
  <li><a href="#ethical-aspects" id="toc-ethical-aspects" class="nav-link" data-scroll-target="#ethical-aspects">Ethical aspects</a></li>
  <li><a href="#how-to-cite-optional" id="toc-how-to-cite-optional" class="nav-link" data-scroll-target="#how-to-cite-optional">How to cite (optional)</a></li>
  <li><a href="#contributing" id="toc-contributing" class="nav-link" data-scroll-target="#contributing">Contributing</a></li>
  <li><a href="#copyright" id="toc-copyright" class="nav-link" data-scroll-target="#copyright">Copyright</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/City-of-Helsinki/ml_project_template/tree/master/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">Helsinki Machine Learning Project Template</h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->
<p><img src="https://img.shields.io/badge/python-3.8-blue" class="img-fluid" alt="Python version"> <a href="https://github.com/psf/black"><img src="https://img.shields.io/badge/code%20style-black-000000.svg" class="img-fluid" alt="Code style: black"></a> <a href="https://badge.fury.io/gh/City-of-Helsinki%2Fml_project_template"><img src="https://badge.fury.io/gh/City-of-Helsinki%2Fml_project_template.svg" class="img-fluid" alt="GitHub version"></a> <img src="https://img.shields.io/github/issues/City-of-Helsinki/ml_project_template.png" class="img-fluid" alt="GitHub issues"> <img src="https://img.shields.io/github/issues-closed-raw/City-of-Helsinki/ml_project_template.png" class="img-fluid" alt="GitHub issues"> <img src="https://img.shields.io/github/forks/City-of-Helsinki/ml_project_template.png" class="img-fluid" alt="GitHub forks"> <img src="https://img.shields.io/github/stars/City-of-Helsinki/ml_project_template.png" class="img-fluid" alt="GitHub stars"> <img src="https://img.shields.io/github/license/City-of-Helsinki/ml_project_template.png" class="img-fluid" alt="GitHub license"></p>
<pre><code>NOTE: Once you begin your work, rewrite this notebook (index.ipynb) so that it describes your project, and regenerate README by calling `nbdev_build_docs`</code></pre>
<section id="about" class="level2">
<h2 class="anchored" data-anchor-id="about">About</h2>
<p>This is a git repository template for Python-based open source ML and analytics projects.</p>
<p>The template assumes the concept of Notebook Development. This means, that you do all the data science work inside notebooks. There is no copy-pasting! We use the <a href="https://nbdev.fast.ai/">nbdev</a> tool to build python modules and doc pages from the notebooks, automatically. This way you always have your code, results and documentation as one. Notebooks can be executed with the <a href="https://papermill.readthedocs.io/">papermill</a> tool for an automatic, well documented model update workflow. Handy, isn’t it?</p>
<p>The template assumes that you divide your machine learning project into 5 parts:</p>
<ol start="0" type="1">
<li>Data - loading &amp; preprocessing</li>
<li>Model - Python class code &amp; algorithm development</li>
<li>Loss - model training &amp; evaluation</li>
<li>Workflow - automatic model update (reproduce steps 0.-2.)</li>
<li>API - an interface to interact with a trained model</li>
</ol>
<p>Each part has their own notebook template, that you can follow to plan and do your development.</p>
<p>In addition, the template comes with a working Dockerfile and .devcontainer for doing your development easily with any device. You can extend these for your needs and for building a runtime container for your machine learning app.</p>
<p>The template is completely open source and environment agnostic. Follow the installation instructions to create a new, independent repository with clean commit history, but with a copy of all the files and folders presented. The authors of this template will not be contributors to your project, although we are more hear what you have achieved with it! Also, if you don’t like something or know an improvement, your contribution is very welcome!</p>
<p>Note, that updates to the template can not be automatically pulled to child projects.</p>
<p>The template is developed and maintained by the data and analytics team of the city of Helsinki. The template is published under the Apache-2.0 licence and open source utilization is encouraged!</p>
</section>
<section id="contents" class="level2">
<h2 class="anchored" data-anchor-id="contents">Contents</h2>
<p>The core structure of the repository is the following:</p>
<pre><code>## EDITABLE:
data/               # Folder for storing data files. Ignored by git by default.
|- raw_data/        # To store raw data files
|- preprocessed_data/   # To store cleaned data
results/            # Save results here. Ignored by git by default.
|- notebooks/       # Save automatically executed notebooks here
00_data.ipynb       # Extract, transfer, load data here &amp; define related functions.
01_model.ipynb      # Create and code test your ML model
02_loss.ipynb       # Train and evaluate ML model, deploy or save for later use
03_workflow.ipynb   # Define ML workflow and parameterization
04_api.ipynb        # Define runtime API for using trained ML model
project-requirements.in    # Add here the Python packages you want to install
update_install_dev_reqs.sh  # run this script to install new python packages
settings.ini        # Project specific settings. Build instructions for lib and docs.
Dockerfile          # Define docker image build instructions
.devcontainer       # Codespaces / VSC dev environment instructions

## AUTOMATICALLY GENERATED: (Do not edit unless otherwise specified!)
docs/               # Project documentation (html)
[your_module]/      # Python module built from the notebooks (follow the installation instructions).
README.md           # The frontpage of your project, generated from index.ipynb
requirements.txt    # dev / default requirements. automatically generated by pip-tools
min-requirements.txt # lighter requirements without dev tools. automatically generated by pip-tools

## STATIC NON-EDITABLE: (Edit only if you know what you're doing!)
base-requirements.in    # core tools that every project built based on the template always requires
requirements.in    # development tools + project spesific requirements
LISENCE                 # lisence information
MANIFEST.in             # metadata for building python distributable
setup.py                # settings for the python module of your project
CODE_OF_CONDUCT.md      # code of conduct. Please review before contributing.
                                     </code></pre>
</section>
<section id="how-to-install" class="level2">
<h2 class="anchored" data-anchor-id="how-to-install">How to install</h2>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>if you are doing a project on personal data for the City of Helsinki, contact the data and analytics team of the city before proceeding any further!</p>
</div>
</div>
<section id="on-your-github-homepage" class="level3">
<h3 class="anchored" data-anchor-id="on-your-github-homepage">1. On your GitHub homepage</h3>
<ol start="0" type="1">
<li>(Create <a href="https://github.com/">GitHub account</a> if you do not have one already.</li>
<li>Sign into your GitHub homepage</li>
<li>Go to <a href="https://github.com/City-of-Helsinki/ml_project_template">github.com/City-of-Helsinki/ml_project_template</a> and click the green button that says ‘Use this template’.</li>
<li>Give your project a name. Do not use the dash symbol ‘-’, but rather the underscore ’_’, because the name of the repo will become the name of your Python module.</li>
<li>If you are creating a project for your organization, change the owner of the repo. From the drop down bar, select your organization GitHub account (e.g.&nbsp;City-of-Helsinki). You need to be included as a team member to the GitHub of the organization.</li>
<li>Define your project publicity (you can change this later, but most likely you want to begin with a private repo).</li>
<li>Click ‘Create repository from template’</li>
</ol>
<p>This will create a new repository for you copying everything from this template, but with clean commit history.</p>
</section>
<section id="setting-up-your-development-environment" class="level3">
<h3 class="anchored" data-anchor-id="setting-up-your-development-environment">2. Setting up your development environment</h3>
<section id="a-recommended-codespaces" class="level4">
<h4 class="anchored" data-anchor-id="a-recommended-codespaces">a) Recommended: Codespaces</h4>
<p>If your organization has <a href="https://github.com/features/codespaces">Codespaces</a> enabled (requires GitHub Enterprise &amp; Azure subscription), you are now ready to begin development. Just launch the repository in a codespace, and a dev container is automatically set up!</p>
</section>
<section id="b-cant-use-codespaces-local-installation-with-docker" class="level4">
<h4 class="anchored" data-anchor-id="b-cant-use-codespaces-local-installation-with-docker">b) Can’t use Codespaces: Local installation with Docker</h4>
<p>You can build a development environment locally with docker. The recommended way is to use VSC in container development mode (<a href="https://code.visualstudio.com/docs/remote/containers">link to instructions</a>).</p>
</section>
<section id="c-cant-use-docker-local-manual-installation" class="level4">
<h4 class="anchored" data-anchor-id="c-cant-use-docker-local-manual-installation">c) Can’t use Docker: Local manual installation</h4>
<p>You can also do your development ‘the good old way’:</p>
<ol start="0" type="1">
<li>Create an SSH key and add it to your github profile (<a href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh">instructions</a>)</li>
<li>Configure your git user name and email adress if you haven’t done it already: <code>git config --global user.name "Firstname Lastname" &amp;&amp; git config --global user.email "your@email.com"</code></li>
<li>Clone your new repository: <code>git clone git@github.com:[repository_owner]/[your_repository]</code></li>
<li>Go inside the repository folder: <code>cd [your_repository]</code></li>
<li>Create and activate virtual environment of your choice. Remember to define the Python version to 3.8! (Instructions: <a href="https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html">conda</a>, <a href="https://packaging.python.org/en/latest/guides/installing-using-pip-and-virtual-environments/">venv</a>)</li>
<li>Install pip-tools: <code>python -m pip install pip-tools</code></li>
<li>Install requirements: <code>pip-sync requirements.txt</code></li>
<li>Create an ipython kernel for running the notebooks: <code>python -m ipykernel install --user --name python38myenv</code></li>
<li>The default development enviroment contains basic Jupyter, and many IDEs have built-in support notebooks. If you wish, you can install JupyterLab by uncommenting it in <code>requirements.in</code> and re-running pip-sync. To launch JupyterLab, run <code>jupyter-lab --allow-root --config .devcontainer/jupyter-server-config.py</code></li>
</ol>
</section>
<section id="d-cant-connect-to-internet-offline-install-with-docker" class="level4">
<h4 class="anchored" data-anchor-id="d-cant-connect-to-internet-offline-install-with-docker">d) Can’t connect to internet: Offline install with Docker</h4>
<p>Sometimes you have to work in an environment that can not be connected to the internet, for example for privacy or cybersecurity reasons. In this case, first install the template and all packages that you assume you will require to an environment with internet, and build the docker image as in 2c). Then, save the docker image and transfer it to your offline environment following <a href="https://stackoverflow.com/questions/48125169/how-run-docker-images-without-connect-to-internet/48125632#48125632">these instructions</a>.</p>
</section>
</section>
<section id="initializing-your-project" class="level3">
<h3 class="anchored" data-anchor-id="initializing-your-project">3. Initializing your project</h3>
<p>Few last tweaks before you are good to go:</p>
<ol type="1">
<li>Edit <code>LICENCE</code>, <code>Makefile</code>, <code>settings.ini</code>, <code>docs/_config.yml</code> and <code>docs/_data/topnav.yml</code> according to your project details. Don’t worry - you can continue editing them in the future.</li>
<li>Remove the folder <code>ml_project_template</code> with the command <code>git rm -r ml_project_template</code>. A new folder with the name of your repository will be created automatically when calling <code>nbdev_build_lib</code>.</li>
<li>Recreate the python module: <code>nbdev_build_lib</code>. In the future, repeat this step every time you move between notebooks to ensure your python modules are up to date.</li>
<li>Recreate the html doc pages &amp; README: <code>nbdev_build_docs</code>. In the future, repeat this step every time you push code to ensure your documentation is up to date.</li>
<li>Make initial commit: <code>git add . &amp;&amp; git commit -m "initialized repository from City-of-Helsinki/ml_project_template"</code></li>
<li>Push changes <code>git push -u origin master</code></li>
</ol>
<p>You are now ready to begin your ML project development. Remember to track your changes with git!</p>
</section>
</section>
<section id="how-to-use" class="level2">
<h2 class="anchored" data-anchor-id="how-to-use">How to use</h2>
<ol type="1">
<li><p>Install this template as basis of your new project (see above).</p></li>
<li><p>If you are not working inside a container, remember to activate your virtual environment every time you begin work: <code>conda activate [environment name]</code> with anaconda or <code>source [environment name]/bin/activate</code> with virtualenv.</p></li>
<li><p>Develop your ML solution! (Follow the notebooks!)</p></li>
<li><p>Save your notebooks and call <code>nbdev_build_lib</code> to build python modules of your notebooks - needed if you want to share code between notebooks or create a modules. This will export all notebook cells with <code># export</code> tag to corresponding .py files under the module (the folder inside your repository named after your repository). Do this every time you make changes to any exportable parts of the code.</p></li>
<li><p>Save your notebooks and call <code>nbdev_build_docs</code> to create doc pages based on your notebooks (see below). This will convert the notebooks into HTML files under <code>docs/</code> and update README based on the <code>index.ipynb</code>. If you want to host your project pages on GitHub (like <a href="https://city-of-helsinki.github.io/ml_project_template/">the doc pages of this template</a>), you will have to make your project public and enable github pages in repo &gt; Settings &gt; Pages : set Source to <code>docs/</code>. Alternatively you can build the pages locally with jekyll.</p></li>
</ol>
</section>
<section id="installing-updating-project-libraries" class="level2">
<h2 class="anchored" data-anchor-id="installing-updating-project-libraries">Installing &amp; updating project libraries</h2>
<p>Python has a rich and wide ecosystem of libraries to help with machine learning tasks among other things. Pandas, Matplotlib, Scipy, PyTorch to name a few. If base libraries in this template aren’t sufficient you can add more with <code>pip install library</code>. However, <code>pip</code> command installs libraries into your local Python environment. To achieve consistent reproducibility we need to gather information about requirements into project repository. New libraries are added to <strong><code>project-requirements.in</code></strong> file. When you change this file remember to run:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pip-compile</span> <span class="at">--generate-hashes</span> <span class="at">--allow-unsafe</span> <span class="at">-o</span> requirements.txt base-requirements.in requirements.in project-requirements.in</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="ex">pip-compile</span> <span class="at">--generate-hashes</span> <span class="at">--allow-unsafe</span> <span class="at">-o</span> min-requirements.txt base-requirements.in project-requirements.in</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>These update full requirements for development environments and lighter, more focused requirements for server usage.</p>
<p>After requirements are updated you should run:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pip-sync</span> requirements.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This way libraries you and other users will have the same Python environment.</p>
<pre><code>NOTE: run `./update_install_dev_reqs.sh` for short - it contains the three above pip commands for updating and installing the requirements!

WARNING: if you don't update package names and versions next time you or anybody else tries to use this project in another environment its code might not work. Worse, it might *seem to* work, but does so incorrectly.</code></pre>
</section>
<section id="ethical-aspects" class="level2">
<h2 class="anchored" data-anchor-id="ethical-aspects">Ethical aspects</h2>
<p>Please involve ethical consideration in the documentation ML application.</p>
<p>For example: * Can you recognize ethical issues with your ML project? * Is there a risk for bias, discrimination, violation of privacy or conflict with the local or global laws? * Could your results or algorithms be misused for malicious acts? * Can data or model updates include bias in your model? * How have you tackled these issues in your implementation? * You most certainly make ethical choises in your code. Do you document &amp; highlight them? * If you build an actual application, how can contribute if they notice an unresolved ethical issue?</p>
</section>
<section id="how-to-cite-optional" class="level2">
<h2 class="anchored" data-anchor-id="how-to-cite-optional">How to cite (optional)</h2>
<p>If you are doing a research project, you can add bibtex and other citation templates here. You can also get a doi for your code by adding it to a code archive, so your code can be cited directly! Most archives also provide repository badges.</p>
<p>To cite this work, use:</p>
<pre><code>@misc{sten2022helsinki,
title = {Helsinki Machine Learning Project Template},
author = {Nuutti A Sten and Jussi Arpalahti},
year = {2022},
howpublished = {City of Helsinki. Available at: \url{https://github.com/City-of-Helsinki/ml_project_template}}
}</code></pre>
</section>
<section id="contributing" class="level2">
<h2 class="anchored" data-anchor-id="contributing">Contributing</h2>
<p>See <a href="https://github.com/City-of-Helsinki/ml_project_template/blob/master/CONTRIBUTING.md">CONTRIBUTING.md</a> on how to contribute to the development of this template.</p>
</section>
<section id="copyright" class="level2">
<h2 class="anchored" data-anchor-id="copyright">Copyright</h2>
<p>Copyright 2022 City-of-Helsinki. Licensed under the Apache License, Version 2.0 (the “License”); you may not use this project’s files except in compliance with the License. A copy of the License is provided in the LICENSE file in this repository.</p>
<p>The Helsinki logo is a registered trademark, and may only be used by the city of Helsinki.</p>
<pre><code>NOTE: If you are using this template for other than city of Helsinki projects, remove the files `favicon.ico` and `company_logo.png` from `docs/assets/images/`.


# to remove remove helsinki logo and favicon, run:
git rm docs/assets/images/favicon.ico docs/assets/images/company_logo.png
git commit -m "removed Helsinki logo and favicon"</code></pre>
<p>This template was built using <a href="https://nbdev.fast.ai/">nbdev</a> on top of the fast.ai <a href="https://github.com/fastai/nbdev_template">nbdev_template</a>.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>